{
  "version": 3,
  "sources": ["../../../../../apps/erpnext/erpnext/public/js/bank_reconciliation_tool/data_table_manager.js", "../../../../../apps/erpnext/erpnext/public/js/bank_reconciliation_tool/number_card.js", "../../../../../apps/erpnext/erpnext/public/js/bank_reconciliation_tool/dialog_manager.js"],
  "sourcesContent": ["frappe.provide(\"erpnext.accounts.bank_reconciliation\");\n\nerpnext.accounts.bank_reconciliation.DataTableManager = class DataTableManager {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.dialog_manager = new erpnext.accounts.bank_reconciliation.DialogManager(\n\t\t\tthis.company,\n\t\t\tthis.bank_account\n\t\t);\n\t\tthis.make_dt();\n\t}\n\n\tmake_dt() {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.get_bank_transactions\",\n\t\t\targs: {\n\t\t\t\tbank_account: this.bank_account,\n\t\t\t},\n\t\t\tcallback: function (response) {\n\t\t\t\tme.format_data(response.message);\n\t\t\t\tme.get_dt_columns();\n\t\t\t\tme.get_datatable();\n\t\t\t\tme.set_listeners();\n\t\t\t},\n\t\t});\n\t}\n\n\tget_dt_columns() {\n\t\tthis.columns = [\n\t\t\t{\n\t\t\t\tname: \"Date\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tname: \"Party Type\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 95,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Party\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Description\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 350,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Deposit\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t\tformat: (value) =>\n\t\t\t\t\t\"<span style='color:green;'>\" +\n\t\t\t\t\tformat_currency(value, this.currency) +\n\t\t\t\t\t\"</span>\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Withdrawal\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t\tformat: (value) =>\n\t\t\t\t\t\"<span style='color:red;'>\" +\n\t\t\t\t\tformat_currency(value, this.currency) +\n\t\t\t\t\t\"</span>\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Unallocated Amount\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t\tformat: (value) =>\n\t\t\t\t\t\"<span style='color:blue;'>\" +\n\t\t\t\t\tformat_currency(value, this.currency) +\n\t\t\t\t\t\"</span>\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Reference Number\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 140,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Actions\",\n\t\t\t\teditable: false,\n\t\t\t\tsortable: false,\n\t\t\t\tfocusable: false,\n\t\t\t\tdropdown: false,\n\t\t\t\twidth: 80,\n\t\t\t},\n\t\t];\n\t}\n\n\tformat_data(transactions) {\n\t\tthis.transactions = [];\n\t\tif (transactions[0]) {\n\t\t\tthis.currency = transactions[0][\"currency\"];\n\t\t}\n\t\tthis.transaction_dt_map = {};\n\t\tlet length;\n\t\ttransactions.forEach((row) => {\n\t\t\tlength = this.transactions.push(this.format_row(row));\n\t\t\tthis.transaction_dt_map[row[\"name\"]] = length - 1;\n\t\t});\n\t}\n\n\tformat_row(row) {\n\t\treturn [\n\t\t\trow[\"date\"],\n\t\t\trow[\"party_type\"],\n\t\t\trow[\"party\"],\n\t\t\trow[\"description\"],\n\t\t\trow[\"deposit\"],\n\t\t\trow[\"withdrawal\"],\n\t\t\trow[\"unallocated_amount\"],\n\t\t\trow[\"reference_number\"],\n\t\t\t`\n\t\t\t<Button class=\"btn btn-primary btn-xs center\"  data-name = ${row[\"name\"]} >\n\t\t\t\tActions\n\t\t\t</a>\n\t\t\t`,\n\t\t];\n\t}\n\n\tget_datatable() {\n\t\tconst datatable_options = {\n\t\t\tcolumns: this.columns,\n\t\t\tdata: this.transactions,\n\t\t\tdynamicRowHeight: true,\n\t\t\tcheckboxColumn: false,\n\t\t\tinlineFilters: true,\n\t\t};\n\t\tthis.datatable = new frappe.DataTable(\n\t\t\tthis.$reconciliation_tool_dt.get(0),\n\t\t\tdatatable_options\n\t\t);\n\t\t$(`.${this.datatable.style.scopeClass} .dt-scrollable`).css(\n\t\t\t\"max-height\",\n\t\t\t\"calc(100vh - 400px)\"\n\t\t);\n\n\t\tif (this.transactions.length > 0) {\n\t\t\tthis.$reconciliation_tool_dt.show();\n\t\t\tthis.$no_bank_transactions.hide();\n\t\t} else {\n\t\t\tthis.$reconciliation_tool_dt.hide();\n\t\t\tthis.$no_bank_transactions.show();\n\t\t}\n\t}\n\n\tset_listeners() {\n\t\tvar me = this;\n\t\t$(`.${this.datatable.style.scopeClass} .dt-scrollable`).on(\n\t\t\t\"click\",\n\t\t\t`.btn`,\n\t\t\tfunction () {\n\t\t\t\tme.dialog_manager.show_dialog(\n\t\t\t\t\t$(this).attr(\"data-name\"),\n\t\t\t\t\t(bank_transaction) => me.update_dt_cards(bank_transaction)\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t);\n\t}\n\n\tupdate_dt_cards(bank_transaction) {\n\t\tconst transaction_index = this.transaction_dt_map[\n\t\t\tbank_transaction.name\n\t\t];\n\t\tif (bank_transaction.unallocated_amount > 0) {\n\t\t\tthis.transactions[transaction_index] = this.format_row(\n\t\t\t\tbank_transaction\n\t\t\t);\n\t\t} else {\n\t\t\tthis.transactions.splice(transaction_index, 1);\n\t\t}\n\t\tthis.datatable.refresh(this.transactions, this.columns);\n\n\t\tif (this.transactions.length == 0) {\n\t\t\tthis.$reconciliation_tool_dt.hide();\n\t\t\tthis.$no_bank_transactions.show();\n\t\t}\n\n\t\t// this.make_dt();\n\t\tthis.get_cleared_balance().then(() => {\n\t\t\tthis.cards_manager.$cards[1].set_value(\n\t\t\t\tformat_currency(this.cleared_balance),\n\t\t\t\tthis.currency\n\t\t\t);\n\t\t\tthis.cards_manager.$cards[2].set_value(\n\t\t\t\tformat_currency(\n\t\t\t\t\tthis.bank_statement_closing_balance - this.cleared_balance\n\t\t\t\t),\n\t\t\t\tthis.currency\n\t\t\t);\n\t\t\tthis.cards_manager.$cards[2].set_value_color(\n\t\t\t\tthis.bank_statement_closing_balance - this.cleared_balance == 0\n\t\t\t\t\t? \"text-success\"\n\t\t\t\t\t: \"text-danger\"\n\t\t\t);\n\t\t});\n\t}\n\n\tget_cleared_balance() {\n\t\tif (this.bank_account && this.bank_statement_to_date) {\n\t\t\treturn frappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.get_account_balance\",\n\t\t\t\targs: {\n\t\t\t\t\tbank_account: this.bank_account,\n\t\t\t\t\ttill_date: this.bank_statement_to_date,\n\t\t\t\t},\n\t\t\t\tcallback: (response) =>\n\t\t\t\t\t(this.cleared_balance = response.message),\n\t\t\t});\n\t\t}\n\t}\n};\n", "frappe.provide(\"erpnext.accounts.bank_reconciliation\");\n\nerpnext.accounts.bank_reconciliation.NumberCardManager = class NumberCardManager {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.make_cards();\n\t}\n\n\tmake_cards() {\n\t\tthis.$reconciliation_tool_cards.empty();\n\t\tthis.$cards = [];\n\t\tthis.$summary = $(`<div class=\"report-summary\"></div>`)\n\t\t\t.hide()\n\t\t\t.appendTo(this.$reconciliation_tool_cards);\n\t\tvar chart_data = [\n\t\t\t{\n\t\t\t\tvalue: this.bank_statement_closing_balance,\n\t\t\t\tlabel: \"Closing Balance as per Bank Statement\",\n\t\t\t\tdatatype: \"Currency\",\n\t\t\t\tcurrency: this.currency,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: this.cleared_balance,\n\t\t\t\tlabel: \"Closing Balance as per ERP\",\n\t\t\t\tdatatype: \"Currency\",\n\t\t\t\tcurrency: this.currency,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue:\n\t\t\t\t\tthis.bank_statement_closing_balance - this.cleared_balance,\n\t\t\t\tlabel: \"Difference\",\n\t\t\t\tdatatype: \"Currency\",\n\t\t\t\tcurrency: this.currency,\n\t\t\t},\n\t\t];\n\n\t\tchart_data.forEach((summary) => {\n\t\t\tlet number_card = new erpnext.accounts.NumberCard(summary);\n\t\t\tthis.$cards.push(number_card);\n\n\t\t\tnumber_card.$card.appendTo(this.$summary);\n\t\t});\n\t\tthis.$cards[2].set_value_color(\n\t\t\tthis.bank_statement_closing_balance - this.cleared_balance == 0\n\t\t\t\t? \"text-success\"\n\t\t\t\t: \"text-danger\"\n\t\t);\n\t\tthis.$summary.css({\"border-bottom\": \"0px\", \"margin-left\": \"0px\", \"margin-right\": \"0px\"});\n\t\tthis.$summary.show();\n\t}\n};\n\nerpnext.accounts.NumberCard = class NumberCard {\n\tconstructor(options) {\n\t\tthis.$card = frappe.utils.build_summary_item(options);\n\t}\n\n\tset_value(value) {\n\t\tthis.$card.find(\"div\").text(value);\n\t}\n\n\tset_value_color(color) {\n\t\tthis.$card\n\t\t\t.find(\"div\")\n\t\t\t.removeClass(\"text-danger text-success\")\n\t\t\t.addClass(`${color}`);\n\t}\n\n\tset_indicator(color) {\n\t\tthis.$card\n\t\t\t.find(\"span\")\n\t\t\t.removeClass(\"indicator red green\")\n\t\t\t.addClass(`indicator ${color}`);\n\t}\n};\n", "frappe.provide(\"erpnext.accounts.bank_reconciliation\");\n\nerpnext.accounts.bank_reconciliation.DialogManager = class DialogManager {\n\tconstructor(company, bank_account) {\n\t\tthis.bank_account = bank_account;\n\t\tthis.company = company;\n\t\tthis.make_dialog();\n\t}\n\n\tshow_dialog(bank_transaction_name, update_dt_cards) {\n\t\tthis.bank_transaction_name = bank_transaction_name;\n\t\tthis.update_dt_cards = update_dt_cards;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get_value\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Bank Transaction\",\n\t\t\t\tfilters: { name: this.bank_transaction_name },\n\t\t\t\tfieldname: [\n\t\t\t\t\t\"date as reference_date\",\n\t\t\t\t\t\"deposit\",\n\t\t\t\t\t\"withdrawal\",\n\t\t\t\t\t\"currency\",\n\t\t\t\t\t\"description\",\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"bank_account\",\n\t\t\t\t\t\"company\",\n\t\t\t\t\t\"reference_number\",\n\t\t\t\t\t\"party_type\",\n\t\t\t\t\t\"party\",\n\t\t\t\t\t\"unallocated_amount\",\n\t\t\t\t\t\"allocated_amount\",\n\t\t\t\t],\n\t\t\t},\n\t\t\tcallback: (r) => {\n\t\t\t\tif (r.message) {\n\t\t\t\t\tthis.bank_transaction = r.message;\n\t\t\t\t\tr.message.payment_entry = 1;\n\t\t\t\t\tthis.dialog.set_values(r.message);\n\t\t\t\t\tthis.dialog.show();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tget_linked_vouchers(document_types) {\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.get_linked_payments\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction_name,\n\t\t\t\tdocument_types: document_types,\n\t\t\t},\n\n\t\t\tcallback: (result) => {\n\t\t\t\tconst data = result.message;\n\n\n\t\t\t\tif (data && data.length > 0) {\n\t\t\t\t\tconst proposals_wrapper = this.dialog.fields_dict.payment_proposals.$wrapper;\n\t\t\t\t\tproposals_wrapper.show();\n\t\t\t\t\tthis.dialog.fields_dict.no_matching_vouchers.$wrapper.hide();\n\t\t\t\t\tthis.data = [];\n\t\t\t\t\tdata.forEach((row) => {\n\t\t\t\t\t\tconst reference_date = row[5] ? row[5] : row[8];\n\t\t\t\t\t\tthis.data.push([\n\t\t\t\t\t\t\trow[1],\n\t\t\t\t\t\t\trow[2],\n\t\t\t\t\t\t\treference_date,\n\t\t\t\t\t\t\tformat_currency(row[3], row[9]),\n\t\t\t\t\t\t\trow[6],\n\t\t\t\t\t\t\trow[4],\n\t\t\t\t\t\t]);\n\t\t\t\t\t});\n\t\t\t\t\tthis.get_dt_columns();\n\t\t\t\t\tthis.get_datatable(proposals_wrapper);\n\t\t\t\t} else {\n\t\t\t\t\tconst proposals_wrapper = this.dialog.fields_dict.payment_proposals.$wrapper;\n\t\t\t\t\tproposals_wrapper.hide();\n\t\t\t\t\tthis.dialog.fields_dict.no_matching_vouchers.$wrapper.show();\n\n\t\t\t\t}\n\t\t\t\tthis.dialog.show();\n\t\t\t},\n\t\t});\n\t}\n\n\tget_dt_columns() {\n\t\tthis.columns = [\n\t\t\t{\n\t\t\t\tname: \"Document Type\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 125,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Document Name\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 150,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Reference Date\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 120,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Amount\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 100,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Party\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 120,\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tname: \"Reference Number\",\n\t\t\t\teditable: false,\n\t\t\t\twidth: 140,\n\t\t\t},\n\t\t];\n\t}\n\n\tget_datatable(proposals_wrapper) {\n\t\tif (!this.datatable) {\n\t\t\tconst datatable_options = {\n\t\t\t\tcolumns: this.columns,\n\t\t\t\tdata: this.data,\n\t\t\t\tdynamicRowHeight: true,\n\t\t\t\tcheckboxColumn: true,\n\t\t\t\tinlineFilters: true,\n\t\t\t};\n\t\t\tthis.datatable = new frappe.DataTable(\n\t\t\t\tproposals_wrapper.get(0),\n\t\t\t\tdatatable_options\n\t\t\t);\n\t\t} else {\n\t\t\tthis.datatable.refresh(this.data, this.columns);\n\t\t\tthis.datatable.rowmanager.checkMap = [];\n\t\t}\n\t}\n\n\tmake_dialog() {\n\t\tconst me = this;\n\t\tme.selected_payment = null;\n\n\t\tconst fields = [\n\t\t\t{\n\t\t\t\tlabel: __(\"Action\"),\n\t\t\t\tfieldname: \"action\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: `Match Against Voucher\\nCreate Voucher\\nUpdate Bank Transaction`,\n\t\t\t\tdefault: \"Match Against Voucher\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_4\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Document Type\"),\n\t\t\t\tfieldname: \"document_type\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: `Payment Entry\\nJournal Entry`,\n\t\t\t\tdefault: \"Payment Entry\",\n\t\t\t\tdepends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"section_break_1\",\n\t\t\t\tlabel: __(\"Filters\"),\n\t\t\t\tdepends_on: \"eval:doc.action=='Match Against Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Payment Entry\",\n\t\t\t\tfieldname: \"payment_entry\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Journal Entry\",\n\t\t\t\tfieldname: \"journal_entry\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Loan Repayment\",\n\t\t\t\tfieldname: \"loan_repayment\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_5\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Sales Invoice\",\n\t\t\t\tfieldname: \"sales_invoice\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Purchase Invoice\",\n\t\t\t\tfieldname: \"purchase_invoice\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Show Only Exact Amount\",\n\t\t\t\tfieldname: \"exact_match\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_5\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Expense Claim\",\n\t\t\t\tfieldname: \"expense_claim\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Check\",\n\t\t\t\tlabel: \"Loan Disbursement\",\n\t\t\t\tfieldname: \"loan_disbursement\",\n\t\t\t\tonchange: () => this.update_options(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"section_break_1\",\n\t\t\t\tlabel: __(\"Select Vouchers to Match\"),\n\t\t\t\tdepends_on: \"eval:doc.action=='Match Against Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"payment_proposals\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"no_matching_vouchers\",\n\t\t\t\toptions: \"<div class=\\\"text-muted text-center\\\">No Matching Vouchers Found</div>\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"details\",\n\t\t\t\tlabel: \"Details\",\n\t\t\t\tdepends_on: \"eval:doc.action!='Match Against Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"reference_number\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tlabel: \"Reference Number\",\n\t\t\t\tmandatory_depends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefault: \"Today\",\n\t\t\t\tfieldname: \"posting_date\",\n\t\t\t\tfieldtype: \"Date\",\n\t\t\t\tlabel: \"Posting Date\",\n\t\t\t\treqd: 1,\n\t\t\t\tdepends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"reference_date\",\n\t\t\t\tfieldtype: \"Date\",\n\t\t\t\tlabel: \"Cheque/Reference Date\",\n\t\t\t\tmandatory_depends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t\tdepends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t\treqd: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"mode_of_payment\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Mode of Payment\",\n\t\t\t\toptions: \"Mode of Payment\",\n\t\t\t\tdepends_on: \"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"edit_in_full_page\",\n\t\t\t\tfieldtype: \"Button\",\n\t\t\t\tlabel: \"Edit in Full Page\",\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.edit_in_full_page();\n\t\t\t\t},\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_7\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefault: \"Journal Entry Type\",\n\t\t\t\tfieldname: \"journal_entry_type\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\tlabel: \"Journal Entry Type\",\n\t\t\t\toptions:\n\t\t\t\t\t\"Journal Entry\\nInter Company Journal Entry\\nBank Entry\\nCash Entry\\nCredit Card Entry\\nDebit Note\\nCredit Note\\nContra Entry\\nExcise Entry\\nWrite Off Entry\\nOpening Entry\\nDepreciation Entry\\nExchange Rate Revaluation\\nDeferred Revenue\\nDeferred Expense\",\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Journal Entry'\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Journal Entry'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"second_account\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Account\",\n\t\t\t\toptions: \"Account\",\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Journal Entry'\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Journal Entry'\",\n\t\t\t\tget_query: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\tis_group: 0,\n\t\t\t\t\t\t\tcompany: this.company,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"party_type\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Party Type\",\n\t\t\t\toptions: \"DocType\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\"eval:doc.action=='Create Voucher' &&  doc.document_type=='Payment Entry'\",\n\t\t\t\tget_query: function () {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\tname: [\n\t\t\t\t\t\t\t\t\"in\",\n\t\t\t\t\t\t\t\tObject.keys(frappe.boot.party_account_types),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"party\",\n\t\t\t\tfieldtype: \"Dynamic Link\",\n\t\t\t\tlabel: \"Party\",\n\t\t\t\toptions: \"party_type\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' && doc.document_type=='Payment Entry'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"project\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Project\",\n\t\t\t\toptions: \"Project\",\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' && doc.document_type=='Payment Entry'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"cost_center\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: \"Cost Center\",\n\t\t\t\toptions: \"Cost Center\",\n\t\t\t\tdepends_on:\n\t\t\t\t\t\"eval:doc.action=='Create Voucher' && doc.document_type=='Payment Entry'\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"details_section\",\n\t\t\t\tlabel: \"Transaction Details\",\n\t\t\t\tcollapsible: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"deposit\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tlabel: \"Deposit\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"withdrawal\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tlabel: \"Withdrawal\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"description\",\n\t\t\t\tfieldtype: \"Small Text\",\n\t\t\t\tlabel: \"Description\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"column_break_17\",\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"allocated_amount\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tlabel: \"Allocated Amount\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\n\t\t\t{\n\t\t\t\tfieldname: \"unallocated_amount\",\n\t\t\t\tfieldtype: \"Currency\",\n\t\t\t\tlabel: \"Unallocated Amount\",\n\t\t\t\tread_only: 1,\n\t\t\t},\n\t\t];\n\n\t\tme.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Reconcile the Bank Transaction\"),\n\t\t\tfields: fields,\n\t\t\tsize: \"large\",\n\t\t\tprimary_action: (values) =>\n\t\t\t\tthis.reconciliation_dialog_primary_action(values),\n\t\t});\n\t}\n\n\tget_selected_attributes() {\n\t\tlet selected_attributes = [];\n\t\tthis.dialog.$wrapper.find(\".checkbox input\").each((i, col) => {\n\t\t\tif ($(col).is(\":checked\")) {\n\t\t\t\tselected_attributes.push($(col).attr(\"data-fieldname\"));\n\t\t\t}\n\t\t});\n\n\t\treturn selected_attributes;\n\t}\n\n\tupdate_options() {\n\t\tlet selected_attributes = this.get_selected_attributes();\n\t\tthis.get_linked_vouchers(selected_attributes);\n\t}\n\n\treconciliation_dialog_primary_action(values) {\n\t\tif (values.action == \"Match Against Voucher\") this.match(values);\n\t\tif (\n\t\t\tvalues.action == \"Create Voucher\" &&\n\t\t\tvalues.document_type == \"Payment Entry\"\n\t\t)\n\t\t\tthis.add_payment_entry(values);\n\t\tif (\n\t\t\tvalues.action == \"Create Voucher\" &&\n\t\t\tvalues.document_type == \"Journal Entry\"\n\t\t)\n\t\t\tthis.add_journal_entry(values);\n\t\telse if (values.action == \"Update Bank Transaction\")\n\t\t\tthis.update_transaction(values);\n\t}\n\n\tmatch() {\n\t\tvar selected_map = this.datatable.rowmanager.checkMap;\n\t\tlet rows = [];\n\t\tselected_map.forEach((val, index) => {\n\t\t\tif (val == 1) rows.push(this.datatable.datamanager.rows[index]);\n\t\t});\n\t\tlet vouchers = [];\n\t\trows.forEach((x) => {\n\t\t\tvouchers.push({\n\t\t\t\tpayment_doctype: x[2].content,\n\t\t\t\tpayment_name: x[3].content,\n\t\t\t\tamount: x[5].content,\n\t\t\t});\n\t\t});\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.reconcile_vouchers\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\tvouchers: vouchers,\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst alert_string =\n\t\t\t\t\t\"Bank Transaction \" +\n\t\t\t\t\tthis.bank_transaction.name +\n\t\t\t\t\t\" Matched\";\n\t\t\t\tfrappe.show_alert(alert_string);\n\t\t\t\tthis.update_dt_cards(response.message);\n\t\t\t\tthis.dialog.hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tadd_payment_entry(values) {\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.create_payment_entry_bts\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\treference_number: values.reference_number,\n\t\t\t\treference_date: values.reference_date,\n\t\t\t\tparty_type: values.party_type,\n\t\t\t\tparty: values.party,\n\t\t\t\tposting_date: values.posting_date,\n\t\t\t\tmode_of_payment: values.mode_of_payment,\n\t\t\t\tproject: values.project,\n\t\t\t\tcost_center: values.cost_center,\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst alert_string =\n\t\t\t\t\t\"Bank Transaction \" +\n\t\t\t\t\tthis.bank_transaction.name +\n\t\t\t\t\t\" added as Payment Entry\";\n\t\t\t\tfrappe.show_alert(alert_string);\n\t\t\t\tthis.update_dt_cards(response.message);\n\t\t\t\tthis.dialog.hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tadd_journal_entry(values) {\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.create_journal_entry_bts\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\treference_number: values.reference_number,\n\t\t\t\treference_date: values.reference_date,\n\t\t\t\tparty_type: values.party_type,\n\t\t\t\tparty: values.party,\n\t\t\t\tposting_date: values.posting_date,\n\t\t\t\tmode_of_payment: values.mode_of_payment,\n\t\t\t\tentry_type: values.journal_entry_type,\n\t\t\t\tsecond_account: values.second_account,\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst alert_string =\n\t\t\t\t\t\"Bank Transaction \" +\n\t\t\t\t\tthis.bank_transaction.name +\n\t\t\t\t\t\" added as Journal Entry\";\n\t\t\t\tfrappe.show_alert(alert_string);\n\t\t\t\tthis.update_dt_cards(response.message);\n\t\t\t\tthis.dialog.hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tupdate_transaction(values) {\n\t\tfrappe.call({\n\t\t\tmethod:\n\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.update_bank_transaction\",\n\t\t\targs: {\n\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\treference_number: values.reference_number,\n\t\t\t\tparty_type: values.party_type,\n\t\t\t\tparty: values.party,\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst alert_string =\n\t\t\t\t\t\"Bank Transaction \" +\n\t\t\t\t\tthis.bank_transaction.name +\n\t\t\t\t\t\" updated\";\n\t\t\t\tfrappe.show_alert(alert_string);\n\t\t\t\tthis.update_dt_cards(response.message);\n\t\t\t\tthis.dialog.hide();\n\t\t\t},\n\t\t});\n\t}\n\n\tedit_in_full_page() {\n\t\tconst values = this.dialog.get_values(true);\n\t\tif (values.document_type == \"Payment Entry\") {\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.create_payment_entry_bts\",\n\t\t\t\targs: {\n\t\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\t\treference_number: values.reference_number,\n\t\t\t\t\treference_date: values.reference_date,\n\t\t\t\t\tparty_type: values.party_type,\n\t\t\t\t\tparty: values.party,\n\t\t\t\t\tposting_date: values.posting_date,\n\t\t\t\t\tmode_of_payment: values.mode_of_payment,\n\t\t\t\t\tproject: values.project,\n\t\t\t\t\tcost_center: values.cost_center,\n\t\t\t\t\tallow_edit: true\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tconst doc = frappe.model.sync(r.message);\n\t\t\t\t\tfrappe.set_route(\"Form\", doc[0].doctype, doc[0].name);\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tfrappe.call({\n\t\t\t\tmethod:\n\t\t\t\t\t\"erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.create_journal_entry_bts\",\n\t\t\t\targs: {\n\t\t\t\t\tbank_transaction_name: this.bank_transaction.name,\n\t\t\t\t\treference_number: values.reference_number,\n\t\t\t\t\treference_date: values.reference_date,\n\t\t\t\t\tparty_type: values.party_type,\n\t\t\t\t\tparty: values.party,\n\t\t\t\t\tposting_date: values.posting_date,\n\t\t\t\t\tmode_of_payment: values.mode_of_payment,\n\t\t\t\t\tentry_type: values.journal_entry_type,\n\t\t\t\t\tsecond_account: values.second_account,\n\t\t\t\t\tallow_edit: true\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tvar doc = frappe.model.sync(r.message);\n\t\t\t\t\tfrappe.set_route(\"Form\", doc[0].doctype, doc[0].name);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n};\n"],
  "mappings": ";;AAAA,SAAO,QAAQ;AAEf,UAAQ,SAAS,oBAAoB,mBAAmB,uBAAuB;AAAA,IAC9E,YAAY,MAAM;AACjB,aAAO,OAAO,MAAM;AACpB,WAAK,iBAAiB,IAAI,QAAQ,SAAS,oBAAoB,cAC9D,KAAK,SACL,KAAK;AAEN,WAAK;AAAA;AAAA,IAGN,UAAU;AACT,UAAI,KAAK;AACT,aAAO,KAAK;AAAA,QACX,QACC;AAAA,QACD,MAAM;AAAA,UACL,cAAc,KAAK;AAAA;AAAA,QAEpB,UAAU,SAAU,UAAU;AAC7B,aAAG,YAAY,SAAS;AACxB,aAAG;AACH,aAAG;AACH,aAAG;AAAA;AAAA;AAAA;AAAA,IAKN,iBAAiB;AAChB,WAAK,UAAU;AAAA,QACd;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAGR;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAER;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAER;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAER;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA,UACP,QAAQ,CAAC,UACR,gCACA,gBAAgB,OAAO,KAAK,YAC5B;AAAA;AAAA,QAEF;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA,UACP,QAAQ,CAAC,UACR,8BACA,gBAAgB,OAAO,KAAK,YAC5B;AAAA;AAAA,QAEF;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA,UACP,QAAQ,CAAC,UACR,+BACA,gBAAgB,OAAO,KAAK,YAC5B;AAAA;AAAA,QAEF;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAER;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU;AAAA,UACV,WAAW;AAAA,UACX,UAAU;AAAA,UACV,OAAO;AAAA;AAAA;AAAA;AAAA,IAKV,YAAY,cAAc;AACzB,WAAK,eAAe;AACpB,UAAI,aAAa,IAAI;AACpB,aAAK,WAAW,aAAa,GAAG;AAAA;AAEjC,WAAK,qBAAqB;AAC1B,UAAI;AACJ,mBAAa,QAAQ,CAAC,QAAQ;AAC7B,iBAAS,KAAK,aAAa,KAAK,KAAK,WAAW;AAChD,aAAK,mBAAmB,IAAI,WAAW,SAAS;AAAA;AAAA;AAAA,IAIlD,WAAW,KAAK;AACf,aAAO;AAAA,QACN,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ;AAAA,gEAC6D,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOnE,gBAAgB;AACf,YAAM,oBAAoB;AAAA,QACzB,SAAS,KAAK;AAAA,QACd,MAAM,KAAK;AAAA,QACX,kBAAkB;AAAA,QAClB,gBAAgB;AAAA,QAChB,eAAe;AAAA;AAEhB,WAAK,YAAY,IAAI,OAAO,UAC3B,KAAK,wBAAwB,IAAI,IACjC;AAED,QAAE,IAAI,KAAK,UAAU,MAAM,6BAA6B,IACvD,cACA;AAGD,UAAI,KAAK,aAAa,SAAS,GAAG;AACjC,aAAK,wBAAwB;AAC7B,aAAK,sBAAsB;AAAA,aACrB;AACN,aAAK,wBAAwB;AAC7B,aAAK,sBAAsB;AAAA;AAAA;AAAA,IAI7B,gBAAgB;AACf,UAAI,KAAK;AACT,QAAE,IAAI,KAAK,UAAU,MAAM,6BAA6B,GACvD,SACA,QACA,WAAY;AACX,WAAG,eAAe,YACjB,EAAE,MAAM,KAAK,cACb,CAAC,qBAAqB,GAAG,gBAAgB;AAE1C,eAAO;AAAA;AAAA;AAAA,IAKV,gBAAgB,kBAAkB;AACjC,YAAM,oBAAoB,KAAK,mBAC9B,iBAAiB;AAElB,UAAI,iBAAiB,qBAAqB,GAAG;AAC5C,aAAK,aAAa,qBAAqB,KAAK,WAC3C;AAAA,aAEK;AACN,aAAK,aAAa,OAAO,mBAAmB;AAAA;AAE7C,WAAK,UAAU,QAAQ,KAAK,cAAc,KAAK;AAE/C,UAAI,KAAK,aAAa,UAAU,GAAG;AAClC,aAAK,wBAAwB;AAC7B,aAAK,sBAAsB;AAAA;AAI5B,WAAK,sBAAsB,KAAK,MAAM;AACrC,aAAK,cAAc,OAAO,GAAG,UAC5B,gBAAgB,KAAK,kBACrB,KAAK;AAEN,aAAK,cAAc,OAAO,GAAG,UAC5B,gBACC,KAAK,iCAAiC,KAAK,kBAE5C,KAAK;AAEN,aAAK,cAAc,OAAO,GAAG,gBAC5B,KAAK,iCAAiC,KAAK,mBAAmB,IAC3D,iBACA;AAAA;AAAA;AAAA,IAKN,sBAAsB;AACrB,UAAI,KAAK,gBAAgB,KAAK,wBAAwB;AACrD,eAAO,OAAO,KAAK;AAAA,UAClB,QACC;AAAA,UACD,MAAM;AAAA,YACL,cAAc,KAAK;AAAA,YACnB,WAAW,KAAK;AAAA;AAAA,UAEjB,UAAU,CAAC,aACT,KAAK,kBAAkB,SAAS;AAAA;AAAA;AAAA;AAAA;;;ACvNtC,SAAO,QAAQ;AAEf,UAAQ,SAAS,oBAAoB,oBAAoB,wBAAwB;AAAA,IAChF,YAAY,MAAM;AACjB,aAAO,OAAO,MAAM;AACpB,WAAK;AAAA;AAAA,IAGN,aAAa;AACZ,WAAK,2BAA2B;AAChC,WAAK,SAAS;AACd,WAAK,WAAW,EAAE,sCAChB,OACA,SAAS,KAAK;AAChB,UAAI,aAAa;AAAA,QAChB;AAAA,UACC,OAAO,KAAK;AAAA,UACZ,OAAO;AAAA,UACP,UAAU;AAAA,UACV,UAAU,KAAK;AAAA;AAAA,QAEhB;AAAA,UACC,OAAO,KAAK;AAAA,UACZ,OAAO;AAAA,UACP,UAAU;AAAA,UACV,UAAU,KAAK;AAAA;AAAA,QAEhB;AAAA,UACC,OACC,KAAK,iCAAiC,KAAK;AAAA,UAC5C,OAAO;AAAA,UACP,UAAU;AAAA,UACV,UAAU,KAAK;AAAA;AAAA;AAIjB,iBAAW,QAAQ,CAAC,YAAY;AAC/B,YAAI,cAAc,IAAI,QAAQ,SAAS,WAAW;AAClD,aAAK,OAAO,KAAK;AAEjB,oBAAY,MAAM,SAAS,KAAK;AAAA;AAEjC,WAAK,OAAO,GAAG,gBACd,KAAK,iCAAiC,KAAK,mBAAmB,IAC3D,iBACA;AAEJ,WAAK,SAAS,IAAI,CAAC,iBAAiB,OAAO,eAAe,OAAO,gBAAgB;AACjF,WAAK,SAAS;AAAA;AAAA;AAIhB,UAAQ,SAAS,aAAa,iBAAiB;AAAA,IAC9C,YAAY,SAAS;AACpB,WAAK,QAAQ,OAAO,MAAM,mBAAmB;AAAA;AAAA,IAG9C,UAAU,OAAO;AAChB,WAAK,MAAM,KAAK,OAAO,KAAK;AAAA;AAAA,IAG7B,gBAAgB,OAAO;AACtB,WAAK,MACH,KAAK,OACL,YAAY,4BACZ,SAAS,GAAG;AAAA;AAAA,IAGf,cAAc,OAAO;AACpB,WAAK,MACH,KAAK,QACL,YAAY,uBACZ,SAAS,aAAa;AAAA;AAAA;;;ACxE1B,SAAO,QAAQ;AAEf,UAAQ,SAAS,oBAAoB,gBAAgB,oBAAoB;AAAA,IACxE,YAAY,SAAS,cAAc;AAClC,WAAK,eAAe;AACpB,WAAK,UAAU;AACf,WAAK;AAAA;AAAA,IAGN,YAAY,uBAAuB,iBAAiB;AACnD,WAAK,wBAAwB;AAC7B,WAAK,kBAAkB;AACvB,aAAO,KAAK;AAAA,QACX,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,SAAS;AAAA,UACT,SAAS,CAAE,MAAM,KAAK;AAAA,UACtB,WAAW;AAAA,YACV;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA;AAAA;AAAA,QAGF,UAAU,CAAC,MAAM;AAChB,cAAI,EAAE,SAAS;AACd,iBAAK,mBAAmB,EAAE;AAC1B,cAAE,QAAQ,gBAAgB;AAC1B,iBAAK,OAAO,WAAW,EAAE;AACzB,iBAAK,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,IAMhB,oBAAoB,gBAAgB;AACnC,aAAO,KAAK;AAAA,QACX,QACC;AAAA,QACD,MAAM;AAAA,UACL,uBAAuB,KAAK;AAAA,UAC5B;AAAA;AAAA,QAGD,UAAU,CAAC,WAAW;AACrB,gBAAM,OAAO,OAAO;AAGpB,cAAI,QAAQ,KAAK,SAAS,GAAG;AAC5B,kBAAM,oBAAoB,KAAK,OAAO,YAAY,kBAAkB;AACpE,8BAAkB;AAClB,iBAAK,OAAO,YAAY,qBAAqB,SAAS;AACtD,iBAAK,OAAO;AACZ,iBAAK,QAAQ,CAAC,QAAQ;AACrB,oBAAM,iBAAiB,IAAI,KAAK,IAAI,KAAK,IAAI;AAC7C,mBAAK,KAAK,KAAK;AAAA,gBACd,IAAI;AAAA,gBACJ,IAAI;AAAA,gBACJ;AAAA,gBACA,gBAAgB,IAAI,IAAI,IAAI;AAAA,gBAC5B,IAAI;AAAA,gBACJ,IAAI;AAAA;AAAA;AAGN,iBAAK;AACL,iBAAK,cAAc;AAAA,iBACb;AACN,kBAAM,oBAAoB,KAAK,OAAO,YAAY,kBAAkB;AACpE,8BAAkB;AAClB,iBAAK,OAAO,YAAY,qBAAqB,SAAS;AAAA;AAGvD,eAAK,OAAO;AAAA;AAAA;AAAA;AAAA,IAKf,iBAAiB;AAChB,WAAK,UAAU;AAAA,QACd;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAER;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAER;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAER;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAER;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA,QAGR;AAAA,UACC,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA;AAAA;AAAA;AAAA,IAKV,cAAc,mBAAmB;AAChC,UAAI,CAAC,KAAK,WAAW;AACpB,cAAM,oBAAoB;AAAA,UACzB,SAAS,KAAK;AAAA,UACd,MAAM,KAAK;AAAA,UACX,kBAAkB;AAAA,UAClB,gBAAgB;AAAA,UAChB,eAAe;AAAA;AAEhB,aAAK,YAAY,IAAI,OAAO,UAC3B,kBAAkB,IAAI,IACtB;AAAA,aAEK;AACN,aAAK,UAAU,QAAQ,KAAK,MAAM,KAAK;AACvC,aAAK,UAAU,WAAW,WAAW;AAAA;AAAA;AAAA,IAIvC,cAAc;AACb,YAAM,KAAK;AACX,SAAG,mBAAmB;AAEtB,YAAM,SAAS;AAAA,QACd;AAAA,UACC,OAAO,GAAG;AAAA,UACV,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA;AAAA;AAAA,UACT,SAAS;AAAA;AAAA,QAEV;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,OAAO,GAAG;AAAA,UACV,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA;AAAA,UACT,SAAS;AAAA,UACT,YAAY;AAAA;AAAA,QAEb;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO,GAAG;AAAA,UACV,YAAY;AAAA;AAAA,QAEb;AAAA,UACC,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU,MAAM,KAAK;AAAA;AAAA,QAEtB;AAAA,UACC,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU,MAAM,KAAK;AAAA;AAAA,QAEtB;AAAA,UACC,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU,MAAM,KAAK;AAAA;AAAA,QAEtB;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU,MAAM,KAAK;AAAA;AAAA,QAEtB;AAAA,UACC,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU,MAAM,KAAK;AAAA;AAAA,QAEtB;AAAA,UACC,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU,MAAM,KAAK;AAAA;AAAA,QAEtB;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU,MAAM,KAAK;AAAA;AAAA,QAEtB;AAAA,UACC,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU,MAAM,KAAK;AAAA;AAAA,QAEtB;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO,GAAG;AAAA,UACV,YAAY;AAAA;AAAA,QAEb;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,SAAS;AAAA;AAAA,QAEV;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,YAAY;AAAA;AAAA,QAEb;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,sBAAsB;AAAA;AAAA,QAEvB;AAAA,UACC,SAAS;AAAA,UACT,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,MAAM;AAAA,UACN,YAAY;AAAA;AAAA,QAEb;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,sBAAsB;AAAA,UACtB,YAAY;AAAA,UACZ,MAAM;AAAA;AAAA,QAEP;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA;AAAA,QAEb;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,OAAO,MAAM;AACZ,iBAAK;AAAA;AAAA,UAEN,YACC;AAAA;AAAA,QAEF;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,SAAS;AAAA,UACT,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SACC;AAAA,UACD,YACC;AAAA,UACD,sBACC;AAAA;AAAA,QAEF;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YACC;AAAA,UACD,sBACC;AAAA,UACD,WAAW,MAAM;AAChB,mBAAO;AAAA,cACN,SAAS;AAAA,gBACR,UAAU;AAAA,gBACV,SAAS,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,QAKlB;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS;AAAA,UACT,sBACA;AAAA,UACA,WAAW,WAAY;AACtB,mBAAO;AAAA,cACN,SAAS;AAAA,gBACR,MAAM;AAAA,kBACL;AAAA,kBACA,OAAO,KAAK,OAAO,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAM7B;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS;AAAA,UACT,sBACC;AAAA;AAAA,QAEF;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YACC;AAAA;AAAA,QAEF;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YACC;AAAA;AAAA,QAEF;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,aAAa;AAAA;AAAA,QAEd;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,WAAW;AAAA;AAAA,QAEZ;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA;AAAA,QAGZ;AAAA,UACC,WAAW;AAAA,UACX,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA;AAAA;AAIb,SAAG,SAAS,IAAI,OAAO,GAAG,OAAO;AAAA,QAChC,OAAO,GAAG;AAAA,QACV;AAAA,QACA,MAAM;AAAA,QACN,gBAAgB,CAAC,WAChB,KAAK,qCAAqC;AAAA;AAAA;AAAA,IAI7C,0BAA0B;AACzB,UAAI,sBAAsB;AAC1B,WAAK,OAAO,SAAS,KAAK,mBAAmB,KAAK,CAAC,GAAG,QAAQ;AAC7D,YAAI,EAAE,KAAK,GAAG,aAAa;AAC1B,8BAAoB,KAAK,EAAE,KAAK,KAAK;AAAA;AAAA;AAIvC,aAAO;AAAA;AAAA,IAGR,iBAAiB;AAChB,UAAI,sBAAsB,KAAK;AAC/B,WAAK,oBAAoB;AAAA;AAAA,IAG1B,qCAAqC,QAAQ;AAC5C,UAAI,OAAO,UAAU;AAAyB,aAAK,MAAM;AACzD,UACC,OAAO,UAAU,oBACjB,OAAO,iBAAiB;AAExB,aAAK,kBAAkB;AACxB,UACC,OAAO,UAAU,oBACjB,OAAO,iBAAiB;AAExB,aAAK,kBAAkB;AAAA,eACf,OAAO,UAAU;AACzB,aAAK,mBAAmB;AAAA;AAAA,IAG1B,QAAQ;AACP,UAAI,eAAe,KAAK,UAAU,WAAW;AAC7C,UAAI,OAAO;AACX,mBAAa,QAAQ,CAAC,KAAK,UAAU;AACpC,YAAI,OAAO;AAAG,eAAK,KAAK,KAAK,UAAU,YAAY,KAAK;AAAA;AAEzD,UAAI,WAAW;AACf,WAAK,QAAQ,CAAC,MAAM;AACnB,iBAAS,KAAK;AAAA,UACb,iBAAiB,EAAE,GAAG;AAAA,UACtB,cAAc,EAAE,GAAG;AAAA,UACnB,QAAQ,EAAE,GAAG;AAAA;AAAA;AAGf,aAAO,KAAK;AAAA,QACX,QACC;AAAA,QACD,MAAM;AAAA,UACL,uBAAuB,KAAK,iBAAiB;AAAA,UAC7C;AAAA;AAAA,QAED,UAAU,CAAC,aAAa;AACvB,gBAAM,eACL,sBACA,KAAK,iBAAiB,OACtB;AACD,iBAAO,WAAW;AAClB,eAAK,gBAAgB,SAAS;AAC9B,eAAK,OAAO;AAAA;AAAA;AAAA;AAAA,IAKf,kBAAkB,QAAQ;AACzB,aAAO,KAAK;AAAA,QACX,QACC;AAAA,QACD,MAAM;AAAA,UACL,uBAAuB,KAAK,iBAAiB;AAAA,UAC7C,kBAAkB,OAAO;AAAA,UACzB,gBAAgB,OAAO;AAAA,UACvB,YAAY,OAAO;AAAA,UACnB,OAAO,OAAO;AAAA,UACd,cAAc,OAAO;AAAA,UACrB,iBAAiB,OAAO;AAAA,UACxB,SAAS,OAAO;AAAA,UAChB,aAAa,OAAO;AAAA;AAAA,QAErB,UAAU,CAAC,aAAa;AACvB,gBAAM,eACL,sBACA,KAAK,iBAAiB,OACtB;AACD,iBAAO,WAAW;AAClB,eAAK,gBAAgB,SAAS;AAC9B,eAAK,OAAO;AAAA;AAAA;AAAA;AAAA,IAKf,kBAAkB,QAAQ;AACzB,aAAO,KAAK;AAAA,QACX,QACC;AAAA,QACD,MAAM;AAAA,UACL,uBAAuB,KAAK,iBAAiB;AAAA,UAC7C,kBAAkB,OAAO;AAAA,UACzB,gBAAgB,OAAO;AAAA,UACvB,YAAY,OAAO;AAAA,UACnB,OAAO,OAAO;AAAA,UACd,cAAc,OAAO;AAAA,UACrB,iBAAiB,OAAO;AAAA,UACxB,YAAY,OAAO;AAAA,UACnB,gBAAgB,OAAO;AAAA;AAAA,QAExB,UAAU,CAAC,aAAa;AACvB,gBAAM,eACL,sBACA,KAAK,iBAAiB,OACtB;AACD,iBAAO,WAAW;AAClB,eAAK,gBAAgB,SAAS;AAC9B,eAAK,OAAO;AAAA;AAAA;AAAA;AAAA,IAKf,mBAAmB,QAAQ;AAC1B,aAAO,KAAK;AAAA,QACX,QACC;AAAA,QACD,MAAM;AAAA,UACL,uBAAuB,KAAK,iBAAiB;AAAA,UAC7C,kBAAkB,OAAO;AAAA,UACzB,YAAY,OAAO;AAAA,UACnB,OAAO,OAAO;AAAA;AAAA,QAEf,UAAU,CAAC,aAAa;AACvB,gBAAM,eACL,sBACA,KAAK,iBAAiB,OACtB;AACD,iBAAO,WAAW;AAClB,eAAK,gBAAgB,SAAS;AAC9B,eAAK,OAAO;AAAA;AAAA;AAAA;AAAA,IAKf,oBAAoB;AACnB,YAAM,SAAS,KAAK,OAAO,WAAW;AACtC,UAAI,OAAO,iBAAiB,iBAAiB;AAC5C,eAAO,KAAK;AAAA,UACX,QACC;AAAA,UACD,MAAM;AAAA,YACL,uBAAuB,KAAK,iBAAiB;AAAA,YAC7C,kBAAkB,OAAO;AAAA,YACzB,gBAAgB,OAAO;AAAA,YACvB,YAAY,OAAO;AAAA,YACnB,OAAO,OAAO;AAAA,YACd,cAAc,OAAO;AAAA,YACrB,iBAAiB,OAAO;AAAA,YACxB,SAAS,OAAO;AAAA,YAChB,aAAa,OAAO;AAAA,YACpB,YAAY;AAAA;AAAA,UAEb,UAAU,CAAC,MAAM;AAChB,kBAAM,MAAM,OAAO,MAAM,KAAK,EAAE;AAChC,mBAAO,UAAU,QAAQ,IAAI,GAAG,SAAS,IAAI,GAAG;AAAA;AAAA;AAAA,aAG5C;AACN,eAAO,KAAK;AAAA,UACX,QACC;AAAA,UACD,MAAM;AAAA,YACL,uBAAuB,KAAK,iBAAiB;AAAA,YAC7C,kBAAkB,OAAO;AAAA,YACzB,gBAAgB,OAAO;AAAA,YACvB,YAAY,OAAO;AAAA,YACnB,OAAO,OAAO;AAAA,YACd,cAAc,OAAO;AAAA,YACrB,iBAAiB,OAAO;AAAA,YACxB,YAAY,OAAO;AAAA,YACnB,gBAAgB,OAAO;AAAA,YACvB,YAAY;AAAA;AAAA,UAEb,UAAU,CAAC,MAAM;AAChB,gBAAI,MAAM,OAAO,MAAM,KAAK,EAAE;AAC9B,mBAAO,UAAU,QAAQ,IAAI,GAAG,SAAS,IAAI,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;",
  "names": []
}
